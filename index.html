<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Infinite Drag Slider</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
      font-family: sans-serif;
    }

    .slider-container {
      width: 90%;
      max-width: 600px;
      overflow: hidden;
      border-radius: 10px;
      position: relative;
    }

    .slider {
      display: flex;
      transition: transform 0.4s ease-in-out;
    }

    .slider img {
      width: 100%;
      flex-shrink: 0;
      height: 300px;
      object-fit: cover;
      user-select: none;
      pointer-events: none;
    }

    .dots {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #888;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .dot.active {
      background-color: #fff;
      transform: scale(1.3);
    }
  </style>
</head>
<body>

  <div class="slider-container" id="sliderContainer">
    <div class="slider" id="slider">
      <!-- Last clone -->
      <img src="https://external-preview.redd.it/mKCqhqwFjYUkxQwRoOeAUucJaCcv-ky-Tk4HNmUtFdQ.jpg?width=1080&crop=smart&auto=webp&s=66d40e580273d1d096f0b2a006668db3ef477b2c" data-clone="last" alt="Slide 5"/>

      <!-- Original images -->
      <img src="https://cdn.wallpapersafari.com/92/89/S1KxLt.jpg" alt="Slide 1"/>
      <img src="https://wallpapercat.com/w/full/f/3/d/2214-3840x2160-desktop-4k-forza-horizon-wallpaper-image.jpg" alt="Slide 2"/>
      <img src="https://actustream.fr/img/Chained-Together-Speedrun-records-joueurs-streamers.jpg" alt="Slide 3"/>
      <img src="https://4kwallpapers.com/images/wallpapers/red-dead-redemption-2560x1440-10885.jpg" alt="Slide 4"/>
      <img src="https://external-preview.redd.it/mKCqhqwFjYUkxQwRoOeAUucJaCcv-ky-Tk4HNmUtFdQ.jpg?width=1080&crop=smart&auto=webp&s=66d40e580273d1d096f0b2a006668db3ef477b2c" alt="Slide 5"/>

      <!-- First clone -->
      <img src="https://cdn.wallpapersafari.com/92/89/S1KxLt.jpg" data-clone="first" alt="Slide 1 clone"/>
    </div>
  </div>

  <div class="dots" id="dots"></div>

  <script>
    const slider = document.getElementById('slider');
    const dotsContainer = document.getElementById('dots');
    const slides = slider.querySelectorAll('img');
    const totalImages = 5;
    let currentIndex = 1;
    let autoSlideInterval;

    const createDots = () => {
      for (let i = 0; i < totalImages; i++) {
        const dot = document.createElement('div');
        dot.classList.add('dot');
        if (i === 0) dot.classList.add('active');
        dot.addEventListener('click', () => {
          currentIndex = i + 1;
          moveToSlide();
          restartAutoSlide();
        });
        dotsContainer.appendChild(dot);
      }
    };

    const updateDots = () => {
      const dots = document.querySelectorAll('.dot');
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentIndex - 1);
      });
    };

    const moveToSlide = () => {
      slider.style.transition = 'transform 0.4s ease-in-out';
      slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      updateDots();
    };

    const startAutoSlide = () => {
      autoSlideInterval = setInterval(() => {
        currentIndex++;
        moveToSlide();
      }, 3000);
    };

    const stopAutoSlide = () => clearInterval(autoSlideInterval);
    const restartAutoSlide = () => {
      stopAutoSlide();
      startAutoSlide();
    };

    slider.addEventListener('transitionend', () => {
      if (slides[currentIndex].dataset.clone === 'last') {
        slider.style.transition = 'none';
        currentIndex = totalImages;
        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      }
      if (slides[currentIndex].dataset.clone === 'first') {
        slider.style.transition = 'none';
        currentIndex = 1;
        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      }
      updateDots();
    });

    // Dragging logic
    let startX = 0, isDragging = false, moveX = 0;
    const sliderContainer = document.getElementById('sliderContainer');

    const onDragStart = (e) => {
      isDragging = true;
      startX = e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
      stopAutoSlide();
      slider.style.transition = 'none';
    };

    const onDragMove = (e) => {
      if (!isDragging) return;
      const x = e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
      moveX = x - startX;
      slider.style.transform = `translateX(-${currentIndex * 100}%) translateX(${moveX}px)`;
    };

    const onDragEnd = () => {
      if (!isDragging) return;
      isDragging = false;
      const threshold = sliderContainer.offsetWidth / 4;
      if (moveX > threshold) currentIndex--;
      else if (moveX < -threshold) currentIndex++;
      moveToSlide();
      restartAutoSlide();
      moveX = 0;
    };

    sliderContainer.addEventListener('mousedown', onDragStart);
    sliderContainer.addEventListener('mousemove', onDragMove);
    sliderContainer.addEventListener('mouseup', onDragEnd);
    sliderContainer.addEventListener('mouseleave', onDragEnd);
    sliderContainer.addEventListener('touchstart', onDragStart);
    sliderContainer.addEventListener('touchmove', onDragMove);
    sliderContainer.addEventListener('touchend', onDragEnd);

    createDots();
    slider.style.transform = `translateX(-${currentIndex * 100}%)`;
    startAutoSlide();
  </script>
</body>
</html>
